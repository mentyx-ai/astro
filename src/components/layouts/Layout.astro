---
// src/components/layouts/Layout.astro
import Header from './Header.astro';
import Footer from './Footer.astro';

interface Props {
  title: string;
  description?: string;
}

const {
  title,
  description = "Mentyx.ai - AI-Powered Loan Origination Platform for Private Lenders. Automate manual underwriting and reduce 30-day loan processes to minutes with our intelligent lending platform."
} = Astro.props as Props;

// ✅ Canonical URL (no trailing slash, except homepage)
const BASE_URL = 'https://mentyx.ai';

const stripTrailingSlash = (url: string) => {
  if (url === BASE_URL || url === `${BASE_URL}/`) return BASE_URL;
  return url.replace(/\/+$/, '');
};

const canonicalUrl = stripTrailingSlash(
  `${BASE_URL}${Astro.url.pathname === '/' ? '' : Astro.url.pathname}`
);
---

<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>{title}</title>
  <meta name="description" content={description} />

  <!-- Favicon Links -->
  <link rel="icon" type="image/x-icon" href="/favicon.ico" />
  <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png" />
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png" />
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png" />
  <link rel="manifest" href="/site.webmanifest" />
  <meta name="theme-color" content="#3b82f6" />

  <!-- ✅ UPDATED: Canonical URL (always, no trailing slash) -->
  <link rel="canonical" href={canonicalUrl} />

  <!-- Open Graph Tags -->
  <meta property="og:title" content={title} />
  <meta property="og:description" content={description} />
  <meta property="og:image" content="https://mentyx.ai/images/og-image.jpg" />
  <meta property="og:image:width" content="1200" />
  <meta property="og:image:height" content="630" />
  <!-- ✅ UPDATED: og:url uses canonicalUrl (no trailing slash) -->
  <meta property="og:url" content={canonicalUrl} />
  <meta property="og:type" content="website" />
  <meta property="og:site_name" content="Mentyx.ai" />

  <!-- Twitter Card -->
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:title" content={title} />
  <meta name="twitter:description" content={description} />
  <meta name="twitter:image" content="https://mentyx.ai/images/twitter-image.jpg" />

  <!-- Structured Data: Organization + Website -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "Organization",
    "name": "Mentyx.ai",
    "url": "https://mentyx.ai",
    "logo": "https://mentyx.ai/images/og-image.jpg",
    "description": "AI-powered loan origination and underwriting platform for private real estate lenders.",
    "sameAs": [
      "https://www.linkedin.com/company/mentyx-ai",
      "https://twitter.com/mentyx_ai"
    ]
  }
  </script>

  <!-- ✅ UPDATED: removed invalid SearchAction (no /search page) -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "WebSite",
    "url": "https://mentyx.ai",
    "name": "Mentyx.ai",
    "description": "AI loan origination and underwriting automation for private real estate lenders.",
    "publisher": {
      "@type": "Organization",
      "name": "Mentyx.ai"
    }
  }
  </script>

  <!-- Additional SEO Meta -->
  <meta name="robots" content="index, follow" />
  <meta name="keywords" content="AI loan origination, private lending, underwriting automation, loan processing software, mortgage technology" />

  <!-- Umami Analytics (läuft immer) -->
  <script
    defer
    src="https://umami-mentyx.vercel.app/script.js"
    data-website-id="3f78a151-168b-4b15-817c-be7f3bce1166">
  </script>

  <!-- Google Analytics 4 (nur nach Consent aktiv) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-EFN2CS305Z"></script>
  <script is:inline>
    window.dataLayer = window.dataLayer || [];
    function gtag(){ dataLayer.push(arguments); }
    // config-Aufruf kommt erst nach "Allow analytics"
  </script>

  <!-- Optimized Font Loading -->
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous" />
  <link
    href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap"
    rel="stylesheet"
    media="print"
    onload="this.media='all'"
  />
  <noscript>
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap"
      rel="stylesheet" />
  </noscript>

  <!-- WICHTIG: Kein AOS-CSS mehr als render-blocking im Head -->
  <!-- AOS CSS wird jetzt zusammen mit dem Script lazy nachgeladen (siehe loadAOS()) -->

  <style is:global>
    :root {
      --slate-50: #f8fafc;
      --slate-100: #f1f5f9;
      --slate-200: #e2e8f0;
      --slate-300: #cbd5e1;
      --slate-400: #94a3b8;
      --slate-500: #64748b;
      --slate-600: #475569;
      --slate-700: #334155;
      --slate-800: #1e293b;
      --slate-900: #0f172a;

      --blue-400: #60a5fa;
      --blue-500: #3b82f6;
      --blue-600: #2563eb;

      --cyan-400: #22d3ee;
      --cyan-500: #06b6d4;
      --cyan-600: #0891b2;

      --red-300: #fca5a5;

      --primary: var(--blue-500);
      --accent: var(--cyan-500);
      --bg: var(--slate-900);
      --text: #ffffff;
    }

    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    html {
      scroll-behavior: smooth;
    }

    body {
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
      background: var(--slate-900);
      color: var(--text);
      line-height: 1.7;
      overflow-x: hidden;
    }

    /* Gradient Background */
    .gradient-bg {
      position: fixed;
      inset: 0;
      z-index: -1;
      background: linear-gradient(to bottom, var(--slate-900) 0%, var(--slate-800) 100%);
    }

    /* Typography */
    h1, h2, h3, h4, h5, h6 {
      font-weight: 700;
      line-height: 1.2;
    }

    /* Buttons */
    .btn {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      padding: 12px 24px;
      border-radius: 12px;
      font-weight: 600;
      font-size: 0.9375rem;
      text-decoration: none;
      transition: all 0.3s ease;
      border: none;
      cursor: pointer;
      font-family: inherit;
      white-space: nowrap;
    }

    .btn-primary {
      background: linear-gradient(135deg, var(--blue-500) 0%, var(--cyan-500) 100%);
      color: white;
      box-shadow: 0 4px 20px rgba(59, 130, 246, 0.3);
    }

    .btn-primary:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 30px rgba(59, 130, 246, 0.5);
    }

    .btn-secondary {
      background: transparent;
      color: var(--slate-300);
      border: 1px solid var(--slate-700);
    }

    .btn-secondary:hover {
      background: var(--slate-800);
      border-color: var(--slate-600);
    }

    .btn-lg {
      padding: 16px 32px;
      font-size: 1.0625rem;
    }

    /* Container */
    .container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 0 24px;
    }

    .section {
      padding: 80px 0;
    }

    /* Gradient Text */
    .gradient-text {
      background: linear-gradient(135deg, var(--blue-400) 0%, var(--cyan-400) 100%);
      -webkit-background-clip: text;
      background-clip: text;
      -webkit-text-fill-color: transparent;
    }

    /* Badge */
    .badge {
      display: inline-block;
      background: rgba(59, 130, 246, 0.1);
      border: 1px solid rgba(59, 130, 246, 0.3);
      border-radius: 50px;
      padding: 8px 20px;
      font-size: 0.875rem;
      color: var(--cyan-400);
      font-weight: 500;
    }

    /* Card */
    .card {
      background: rgba(30, 41, 59, 0.5);
      backdrop-filter: blur(24px);
      border: 1px solid var(--slate-700);
      border-radius: 24px;
      padding: 32px;
      transition: all 0.3s;
    }

    .card:hover {
      transform: translateY(-4px);
      border-color: var(--slate-600);
    }

    /* TRUST BADGES */
    .trust-badges {
      background: rgba(30, 41, 59, 0.3);
      border-radius: 12px;
      padding: 2rem;
      margin-top: 2rem;
      border-top: 1px solid var(--slate-700);
      border-bottom: 1px solid var(--slate-700);
    }

    .trust-badges h3 {
      text-align: center;
      font-size: 1.125rem;
      font-weight: 600;
      margin-bottom: 1.5rem;
      color: var(--slate-300);
    }

    .trust-badges-grid {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      align-items: center;
      gap: 2rem;
    }

    .trust-badge-item {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 0.5rem;
      color: var(--slate-400);
      font-size: 0.9rem;
    }

    .trust-badge-icon {
      font-size: 1.5rem;
      margin-bottom: 0.25rem;
    }

    @media (max-width: 768px) {
      .trust-badges-grid {
        gap: 1.5rem;
      }

      .trust-badge-item {
        flex: 0 0 calc(33.333% - 1rem);
      }
    }

    /* Modal */
    .modal {
      display: none;
      position: fixed;
      z-index: 9999;
      inset: 0;
      background: rgba(0, 0, 0, 0.8);
      backdrop-filter: blur(8px);
      align-items: center;
      justify-content: center;
      padding: 20px;
    }

    .modal.active,
    .modal[style*="display: block"] {
      display: flex !important;
    }

    .modal-content {
      background: var(--slate-800);
      border-radius: 24px;
      border: 1px solid var(--slate-700);
      max-width: 500px;
      width: 100%;
      max-height: 90vh;
      overflow-y: auto;
    }

    .modal-header {
      padding: 24px 32px;
      border-bottom: 1px solid var(--slate-700);
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .modal-header h2 {
      font-size: 1.5rem;
      margin: 0;
    }

    .modal-close {
      background: none;
      border: none;
      color: var(--slate-400);
      font-size: 1.5rem;
      cursor: pointer;
      width: 32px;
      height: 32px;
      display: flex;
      align-items: center;
      justify-content: center;
      border-radius: 8px;
      transition: all 0.2s;
    }

    .modal-close:hover {
      background: var(--slate-700);
      color: var(--text);
    }

    .modal-body {
      padding: 32px;
    }

    /* Form */
    .form-group {
      margin-bottom: 20px;
    }

    .form-group label {
      display: block;
      margin-bottom: 8px;
      font-weight: 500;
      color: var(--slate-300);
      font-size: 0.875rem;
    }

    .form-group input,
    .form-group textarea {
      width: 100%;
      padding: 12px 16px;
      background: var(--slate-900);
      border: 1px solid var(--slate-700);
      border-radius: 12px;
      color: var(--text);
      font-family: inherit;
      font-size: 0.9375rem;
      transition: all 0.3s;
    }

    .form-group input:focus,
    .form-group textarea:focus {
      outline: none;
      border-color: var(--blue-500);
      box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
    }

    .form-group textarea {
      resize: vertical;
      min-height: 100px;
    }

    .required {
      color: #ff6b6b;
    }

    .form-message {
      padding: 12px 16px;
      border-radius: 12px;
      margin-bottom: 20px;
      font-size: 0.875rem;
      display: none;
    }

    .form-message.success {
      background: rgba(34, 197, 94, 0.1);
      border: 1px solid rgba(34, 197, 94, 0.3);
      color: #86efac;
    }

    .form-message.error {
      background: rgba(239, 68, 68, 0.1);
      border: 1px solid rgba(239, 68, 68, 0.3);
      color: #fca5a5;
    }

    @media (max-width: 768px) {
      .section {
        padding: 48px 0;
      }

      .modal-content {
        margin: 20px;
      }

      .modal-header,
      .modal-body {
        padding: 24px;
      }
    }

    /* COOKIE BANNER (fixed bottom, Mentyx-style) */
    .cookie-banner {
      position: fixed;
      left: 50%;
      bottom: 24px;
      transform: translateX(-50%);
      max-width: 640px;
      width: calc(100% - 32px);
      background:
        radial-gradient(circle at top left, rgba(56, 189, 248, 0.12), transparent 55%),
        radial-gradient(circle at bottom right, rgba(129, 140, 248, 0.18), transparent 55%),
        rgba(15, 23, 42, 0.98);
      border-radius: 18px;
      border: 1px solid rgba(148, 163, 184, 0.6);
      box-shadow: 0 24px 60px rgba(15, 23, 42, 0.9);
      padding: 18px 20px;
      display: none; /* wird per JS gezeigt */
      z-index: 9998;
      backdrop-filter: blur(18px);
    }

    .cookie-inner {
      display: flex;
      flex-direction: row;
      gap: 16px;
      align-items: flex-start;
    }

    .cookie-icon {
      flex-shrink: 0;
      width: 32px;
      height: 32px;
      border-radius: 999px;
      background: rgba(15, 23, 42, 0.9);
      border: 1px solid rgba(94, 234, 212, 0.5);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 18px;
      color: #67e8f9;
      margin-top: 2px;
    }

    .cookie-content {
      flex: 1;
      min-width: 0;
    }

    .cookie-title {
      font-size: 0.95rem;
      font-weight: 600;
      letter-spacing: 0.02em;
      color: #e2e8f0;
      margin-bottom: 4px;
    }

    .cookie-text {
      font-size: 0.85rem;
      color: #94a3b8;
      line-height: 1.5;
    }

    .cookie-text a {
      color: var(--cyan-400);
      text-decoration: underline;
    }

    .cookie-buttons {
      display: flex;
      gap: 8px;
      margin-top: 10px;
      justify-content: flex-end;
      flex-wrap: wrap;
    }

    .cookie-btn {
      padding: 8px 14px;
      border-radius: 999px;
      font-size: 0.82rem;
      font-weight: 600;
      border: 1px solid transparent;
      cursor: pointer;
      transition: all 0.18s ease;
      font-family: inherit;
      white-space: nowrap;
    }

    .cookie-btn-primary {
      background: linear-gradient(135deg, var(--blue-500) 0%, var(--cyan-500) 100%);
      color: #fff;
      box-shadow: 0 10px 25px rgba(37, 99, 235, 0.6);
    }

    .cookie-btn-primary:hover {
      transform: translateY(-1px);
      box-shadow: 0 14px 30px rgba(37, 99, 235, 0.7);
    }

    .cookie-btn-secondary {
      background: rgba(15, 23, 42, 0.8);
      color: #e2e8f0;
      border-color: rgba(148, 163, 184, 0.7);
    }

    .cookie-btn-secondary:hover {
      background: rgba(15, 23, 42, 1);
      border-color: rgba(148, 163, 184, 1);
    }

    .cookie-btn-ghost {
      background: transparent;
      color: #94a3b8;
      border-color: rgba(148, 163, 184, 0.4);
    }

    .cookie-btn-ghost:hover {
      background: rgba(15, 23, 42, 0.9);
      color: #e2e8f0;
      border-color: rgba(148, 163, 184, 0.8);
    }

    @media (max-width: 640px) {
      .cookie-banner {
        bottom: 16px;
        padding: 14px 14px;
      }

      .cookie-inner {
        flex-direction: column;
        gap: 10px;
      }

      .cookie-buttons {
        width: 100%;
        justify-content: stretch;
      }

      .cookie-btn {
        flex: 1;
        text-align: center;
      }
    }
  </style>
</head>

<body>
  <div class="gradient-bg"></div>

  <Header />

  <slot />

  <Footer />

  <!-- Contact Modal -->
  <div class="modal" id="contactModal">
    <div class="modal-content">
      <div class="modal-header">
        <h2>Schedule a call with <span class="gradient-text">Mentyx.ai</span></h2>
        <button class="modal-close" id="closeModal">&times;</button>
      </div>
      <div class="modal-body">
        <div class="form-message" id="formMessage"></div>

        <!-- Web3Forms Contact Form -->
        <form
          id="contactForm"
          action="https://api.web3forms.com/submit"
          method="POST"
          class="contact-form">
          <input type="hidden" name="access_key" value="668cabdc-9057-4e2a-8995-2a2e8ec13aaf" />
          <input type="hidden" name="subject" value="Contact Form Submission - Mentyx.ai" />
          <input type="hidden" name="from_name" value="Mentyx.ai Website Contact" />
          <input type="checkbox" name="botcheck" style="display: none;" />

          <div class="form-group">
            <label for="name">Full Name <span class="required">*</span></label>
            <input type="text" id="name" name="name" required />
          </div>

          <div class="form-group">
            <label for="email">Work Email <span class="required">*</span></label>
            <input type="email" id="email" name="email" required />
          </div>

          <div class="form-group">
            <label for="company">Company Name <span class="required">*</span></label>
            <input type="text" id="company" name="company" required />
          </div>

          <div class="form-group">
            <label for="phone">Phone Number</label>
            <input type="tel" id="phone" name="phone" />
          </div>

          <div class="form-group">
            <label for="message">Message</label>
            <textarea id="message" name="message" rows="4"></textarea>
          </div>

          <button type="submit" class="btn btn-primary" style="width: 100%;">Schedule Call</button>
        </form>
      </div>
    </div>
  </div>

  <!-- Cookie Banner -->
  <div id="cookie-banner" class="cookie-banner" aria-live="polite">
    <div class="cookie-inner">
      <div class="cookie-icon">✔</div>
      <div class="cookie-content">
        <div id="cookie-title" class="cookie-title">We respect your privacy</div>
        <p class="cookie-text">
          We use essential cookies and privacy-friendly analytics to understand how visitors use
          Mentyx.ai and to improve the experience. Google Analytics cookies will only be set if you
          choose "Allow analytics". You can change your choice at any time in your browser settings.
          See our
          <a href="/privacy-policy" target="_blank" rel="noopener noreferrer">Privacy Policy</a>.
        </p>

        <div class="cookie-buttons">
          <button
            id="cookie-deny"
            type="button"
            class="cookie-btn cookie-btn-ghost"
          >
            Deny
          </button>
          <button
            id="cookie-reject"
            type="button"
            class="cookie-btn cookie-btn-secondary"
          >
            Only essential
          </button>
          <button
            id="cookie-accept"
            type="button"
            class="cookie-btn cookie-btn-primary"
          >
            Allow analytics
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- Cookie Banner + Analytics Logic -->
  <script is:inline>
    (function () {
      const STORAGE_KEY = 'mentyx_cookie_consent';
      const banner = document.getElementById('cookie-banner');
      const btnAccept = document.getElementById('cookie-accept');
      const btnReject = document.getElementById('cookie-reject');
      const btnDeny = document.getElementById('cookie-deny');

      function showBanner() {
        if (banner) {
          banner.style.display = 'flex';
        }
      }

      function hideBanner() {
        if (banner) {
          banner.style.display = 'none';
        }
      }

      function enableAnalytics() {
        try {
          if (typeof gtag === 'function') {
            gtag('js', new Date());
            gtag('config', 'G-EFN2CS305Z');
          }
        } catch (e) {
          console.error('GA4 init error', e);
        }
      }

      function handleExistingConsent() {
        const consent = window.localStorage.getItem(STORAGE_KEY);

        if (consent === 'analytics') {
          enableAnalytics();
          hideBanner();
        } else if (consent === 'essential' || consent === 'deny') {
          hideBanner();
        } else {
          showBanner();
        }
      }

      if (btnAccept) {
        btnAccept.addEventListener('click', function () {
          window.localStorage.setItem(STORAGE_KEY, 'analytics');
          enableAnalytics();
          hideBanner();
        });
      }

      if (btnReject) {
        btnReject.addEventListener('click', function () {
          window.localStorage.setItem(STORAGE_KEY, 'essential');
          hideBanner();
        });
      }

      if (btnDeny) {
        btnDeny.addEventListener('click', function () {
          window.localStorage.setItem(STORAGE_KEY, 'deny');
          hideBanner();
        });
      }

      document.addEventListener('DOMContentLoaded', handleExistingConsent);
    })();
  </script>

  <!-- Modal / AOS / Smooth Scroll -->
  <script is:inline>
    window.openModal = function () {
      const modal = document.getElementById('contactModal');
      if (modal) {
        modal.classList.add('active');
        document.body.style.overflow = 'hidden';
      }
    };

    window.closeModal = function () {
      const modal = document.getElementById('contactModal');
      if (modal) {
        modal.classList.remove('active');
        document.body.style.overflow = '';
      }
    };

    function loadAOS() {
      if (document.documentElement.dataset.aosLoaded === 'true') return;
      document.documentElement.dataset.aosLoaded = 'true';

      // AOS CSS lazy nachladen
      const aosCss = document.createElement('link');
      aosCss.rel = 'stylesheet';
      aosCss.href = 'https://unpkg.com/aos@2.3.1/dist/aos.css';
      document.head.appendChild(aosCss);

      // AOS Script lazy nachladen
      const script = document.createElement('script');
      script.src = 'https://unpkg.com/aos@2.3.1/dist/aos.js';
      script.onload = () => {
        if (typeof AOS !== 'undefined') {
          AOS.init({
            duration: 800,
            easing: 'ease-out',
            once: true,
            offset: 100
          });
        }
      };
      document.head.appendChild(script);
    }

    window.addEventListener('load', function () {
      if ('performance' in window) {
        const navTiming = performance.getEntriesByType('navigation')[0];
        if (navTiming) {
          console.log('Page load time:', navTiming.loadEventEnd - navTiming.navigationStart + 'ms');
        }
      }

      // AOS nur laden, wenn ein Element mit data-aos in Sicht kommt
      if ('IntersectionObserver' in window) {
        const targets = document.querySelectorAll('[data-aos]');
        if (targets.length > 0) {
          const observer = new IntersectionObserver((entries, obs) => {
            for (const entry of entries) {
              if (entry.isIntersecting) {
                loadAOS();
                obs.disconnect();
                break;
              }
            }
          });

          observer.observe(targets[0]);
        }
      } else {
        // Fallback, wenn IntersectionObserver nicht verfügbar ist
        loadAOS();
      }

      const modal = document.getElementById('contactModal');
      const closeBtn = document.getElementById('closeModal');
      const form = document.getElementById('contactForm');
      const formMessage = document.getElementById('formMessage');

      if (closeBtn) {
        closeBtn.addEventListener('click', window.closeModal);
      }

      if (modal) {
        modal.addEventListener('click', function (e) {
          if (e.target === modal) {
            window.closeModal();
          }
        });
      }

      document.addEventListener('keydown', function (e) {
        if (e.key === 'Escape') {
          window.closeModal();
        }
      });

      if (form) {
        form.addEventListener('submit', async function (e) {
          e.preventDefault();

          const submitBtn = form.querySelector('button[type="submit"]');
          const originalText = submitBtn.textContent;

          submitBtn.textContent = 'Sending...';
          submitBtn.disabled = true;

          if (formMessage) {
            formMessage.style.display = 'none';
          }

          try {
            const formData = new FormData(form);
            const response = await fetch(form.action, {
              method: 'POST',
              body: formData
            });

            const result = await response.json();

            if (result.success) {
              if (formMessage) {
                formMessage.textContent = "Thank you! We'll get back to you within 24 hours.";
                formMessage.className = 'form-message success';
                formMessage.style.display = 'block';
              }
              form.reset();

              setTimeout(() => {
                window.closeModal();
                if (formMessage) {
                  formMessage.style.display = 'none';
                }
                submitBtn.textContent = originalText;
                submitBtn.disabled = false;
              }, 3000);
            } else {
              throw new Error(result.message || 'Submission failed');
            }
          } catch (error) {
            if (formMessage) {
              formMessage.textContent =
                'Something went wrong. Please try again or email us directly at contact@mentyx.ai';
              formMessage.className = 'form-message error';
              formMessage.style.display = 'block';
            }
            submitBtn.textContent = originalText;
            submitBtn.disabled = false;
          }
        });
      }

      document.querySelectorAll('a[href^="#"]').forEach(function (anchor) {
        anchor.addEventListener('click', function (e) {
          const href = this.getAttribute('href');
          if (!href || href === '#') return;

          const target = document.querySelector(href);
          if (target) {
            e.preventDefault();
            target.scrollIntoView({
              behavior: 'smooth',
              block: 'start'
            });
          }
        });
      });
    });
  </script>
</body>
</html>
